# ============================================
# CONFIGURACIÓN DE PRODUCCIÓN - TechTrace
# ============================================
# Este archivo contiene un ejemplo de configuración para PRODUCCIÓN
# Copia este archivo a .env y ajusta los valores según tu entorno

# ============================================
# CONFIGURACIÓN DE DJANGO
# ============================================

# SECRET_KEY: ⚠️ CRÍTICO - Genera una clave única para producción
# NO USES LA CLAVE DE EJEMPLO - Genera una nueva con el siguiente comando:
# python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
SECRET_KEY=GENERA-UNA-CLAVE-NUEVA-AQUI

# DEBUG: ⚠️ DEBE SER False EN PRODUCCIÓN
DEBUG=False

# ALLOWED_HOSTS: Dominios/IPs permitidos (REQUERIDO cuando DEBUG=False)
# Separar por comas sin espacios
ALLOWED_HOSTS=tudominio.com,www.tudominio.com,api.tudominio.com

# ============================================
# CONFIGURACIÓN DE BASE DE DATOS - PostgreSQL
# ============================================

# Opción 1: Variables individuales (recomendado para servidor propio)
DATABASE_ENGINE=django.db.backends.postgresql
DATABASE_NAME=techtrace_db
DATABASE_USER=techtrace_user
DATABASE_PASSWORD=TU_PASSWORD_POSTGRESQL_SEGURO
DATABASE_HOST=localhost
DATABASE_PORT=5432

# Opción 2: DATABASE_URL (recomendado para Heroku/Railway/Render)
# Descomentar y usar en lugar de las variables individuales:
# DATABASE_URL=postgresql://techtrace_user:password@host:5432/techtrace_db

# ============================================
# CONFIGURACIÓN DE CORS
# ============================================

# CORS_ALLOWED_ORIGINS: URLs del frontend permitidas
# ⚠️ Usar HTTPS en producción
CORS_ALLOWED_ORIGINS=https://tudominio.com,https://www.tudominio.com

# CORS_ALLOW_CREDENTIALS: Permitir cookies/credenciales
CORS_ALLOW_CREDENTIALS=True

# ============================================
# CONFIGURACIÓN DE JWT
# ============================================

# JWT_ACCESS_TOKEN_LIFETIME: Duración del token de acceso (minutos)
# Recomendado: 30-60 minutos en producción
JWT_ACCESS_TOKEN_LIFETIME=30

# JWT_REFRESH_TOKEN_LIFETIME: Duración del token de refresh (días)
# Recomendado: 7 días
JWT_REFRESH_TOKEN_LIFETIME=7

# ============================================
# INTERNACIONALIZACIÓN
# ============================================

LANGUAGE_CODE=es-cl
TIME_ZONE=America/Santiago
USE_TZ=True

# ============================================
# CONFIGURACIÓN DE EMAIL
# ============================================

# Configuración SMTP para envío de correos
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend

# Gmail (usar App Password, no contraseña normal)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=tu-email@gmail.com
EMAIL_HOST_PASSWORD=tu-app-password-de-gmail
DEFAULT_FROM_EMAIL=TechTrace <noreply@tudominio.com>

# Alternativas SMTP:
#
# SendGrid:
#   EMAIL_HOST=smtp.sendgrid.net
#   EMAIL_PORT=587
#   EMAIL_HOST_USER=apikey
#   EMAIL_HOST_PASSWORD=tu-api-key-de-sendgrid
#
# Mailgun:
#   EMAIL_HOST=smtp.mailgun.org
#   EMAIL_PORT=587
#   EMAIL_HOST_USER=postmaster@tu-dominio.mailgun.org
#   EMAIL_HOST_PASSWORD=tu-password-de-mailgun
#
# AWS SES:
#   EMAIL_HOST=email-smtp.us-east-1.amazonaws.com
#   EMAIL_PORT=587
#   EMAIL_HOST_USER=tu-access-key-id
#   EMAIL_HOST_PASSWORD=tu-secret-access-key

# ============================================
# CONFIGURACIÓN DE ARCHIVOS ESTÁTICOS Y MEDIA
# ============================================

# URLs
STATIC_URL=/static/
MEDIA_URL=/media/

# Directorios (ajustar según tu servidor)
STATIC_ROOT=/var/www/techtrace/static/
MEDIA_ROOT=/var/www/techtrace/media/

# Para usar AWS S3 (opcional):
# Instalar: pip install django-storages boto3
# AWS_ACCESS_KEY_ID=tu-access-key
# AWS_SECRET_ACCESS_KEY=tu-secret-key
# AWS_STORAGE_BUCKET_NAME=techtrace-static
# AWS_S3_REGION_NAME=us-east-1
# AWS_S3_CUSTOM_DOMAIN=tu-bucket.s3.amazonaws.com

# ============================================
# CONFIGURACIÓN DE SEGURIDAD
# ============================================
# ⚠️ TODAS estas opciones deben estar habilitadas en producción con HTTPS

SECURE_SSL_REDIRECT=True
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True
SECURE_BROWSER_XSS_FILTER=True
SECURE_CONTENT_TYPE_NOSNIFF=True
X_FRAME_OPTIONS=DENY
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True

# ============================================
# LOGGING Y MONITOREO
# ============================================

# LOG_LEVEL: Nivel de logging
# Producción: INFO o WARNING
# Debug temporal: DEBUG
LOG_LEVEL=INFO

# Sentry para monitoreo de errores (opcional pero recomendado)
# Registrarse en https://sentry.io
# SENTRY_DSN=https://tu-dsn-aqui@o123456.ingest.sentry.io/7654321

# ============================================
# VARIABLES ESPECÍFICAS DE LA APLICACIÓN
# ============================================

# FRONTEND_URL: URL del frontend (para PDFs, emails, etc.)
FRONTEND_URL=https://tudominio.com

# MAX_UPLOAD_SIZE: Tamaño máximo de archivos (MB)
MAX_UPLOAD_SIZE=10

# DEVICE_DEPRECIATION_YEARS: Años para depreciación de dispositivos
DEVICE_DEPRECIATION_YEARS=5

# ============================================
# NOTAS IMPORTANTES PARA PRODUCCIÓN
# ============================================
#
# 1. SEGURIDAD:
#    - Genera una SECRET_KEY única y segura
#    - Nunca subas el archivo .env al repositorio
#    - Usa variables de entorno del servidor cuando sea posible
#    - Mantén DEBUG=False SIEMPRE en producción
#
# 2. BASE DE DATOS:
#    - Configura backups automáticos de PostgreSQL
#    - Usa contraseñas fuertes para el usuario de base de datos
#    - Considera usar conexión SSL a la base de datos
#
# 3. ARCHIVOS ESTÁTICOS:
#    - Ejecuta collectstatic antes de desplegar
#    - Considera usar CDN para archivos estáticos
#    - Configura compresión gzip en Nginx
#
# 4. MONITOREO:
#    - Configura Sentry para tracking de errores
#    - Implementa logging apropiado
#    - Monitorea uso de recursos del servidor
#
# 5. BACKUPS:
#    - Configura backups automáticos de la base de datos
#    - Backup de archivos media periódicamente
#    - Prueba restauración de backups regularmente
#
# 6. SSL/HTTPS:
#    - Obtén certificado SSL (Let's Encrypt es gratis)
#    - Configura redirección HTTP → HTTPS
#    - Verifica configuración con SSL Labs
#
# 7. RENDIMIENTO:
#    - Usa Gunicorn con múltiples workers
#    - Configura Nginx como reverse proxy
#    - Implementa caching cuando sea apropiado
#    - Considera usar Redis para cache/sessions
#
# Consulta DEPLOYMENT.md para más detalles
